import{r as a,a as t,j as p}from"./app-71bfcee7.js";import{f as x}from"./helper-76ebf62d.js";const N=({selectPayment:m,paymentId:n})=>{const[l,h]=a.exports.useState([]),[c,u]=a.exports.useState([]),r=()=>{let e=new Headers;e.append("Content-Type","application/json"),e.append("Authorization",`Bearer ${localStorage.getItem("token")}`),fetch("/api/payments?status=0&method=MPESA",{method:"GET",headers:e}).then(s=>s.json()).then(s=>{u(s.data)})};a.exports.useEffect(()=>{r();const e=setInterval(()=>{r()},5e3);return()=>{clearInterval(e)}},[]),a.exports.useEffect(()=>{h(c)},[c]);const f=e=>{let d=`/api/payments/${e.id}`;if(!confirm("Are you sure you want to mark this payment as used?"))return;let o=new Headers;o.append("Content-Type","application/json"),o.append("Authorization",`Bearer ${localStorage.getItem("token")}`),fetch(d,{method:"POST",headers:o,body:JSON.stringify({status:1})}).then(i=>i).then(i=>{r()})};return t("div",{className:"py-10 flex flex-col px-2",children:t("div",{className:"flex flex-col space-y-2",children:l&&l.map(e=>t("div",{className:"justify-between items-center px-5 py-3 bg-gray-100 rounded-md",children:p("label",{htmlFor:`payment${e.id}`,className:"justify-between items-center w-full grid grid-cols-10",children:[t("div",{className:"",children:t("input",{id:`payment${e.id}`,onClick:()=>{console.log(n===e.id),m(n===e.id?null:e)},checked:n===e.id,type:"checkbox",className:"mr-2"})}),t("span",{className:"font-bold text-sm col-span-2",children:x(e.total)})," ",t("span",{className:"font-bold text-sm col-span-2",children:e.payer_name||" Customer"}),t("span",{className:"font-bold text-sm col-span-2",children:e.payer_phone}),p("span",{className:"text-sm col-span-3 flex justify-between items-center",children:[t("span",{children:new Date(e.created_at).toDateString()}),t("button",{onClick:()=>f(e),className:"text-green-500 p-0.5 rounded-full border",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})]})]})},e.id))})})};export{N as default};
