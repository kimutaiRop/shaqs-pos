import{R as d,r as m,j as l,a as r}from"./app-9a7107f0.js";import g from"./Sidebar-37ad4ec5.js";import{f as h}from"./helper-76ebf62d.js";import N from"./Checkout-1b5da29d.js";import w from"./MenuCategories-ee7d189a.js";import"./FinishCheckout-2515e667.js";import"./Dialog-01031fca.js";import"./MpesaUnused-fde988b2.js";import"./Receipt-d9c435a8.js";const q=()=>{const[c,f]=d.useState([]),[n,s]=d.useState([]);m.exports.useEffect(()=>{let t="/api/menu";window.location.search&&(t+=window.location.search);let e=new Headers;e.append("Content-Type","application/json"),e.append("Authorization",`Bearer ${localStorage.getItem("token")}`),fetch(t,{method:"GET",headers:e}).then(a=>a.json()).then(a=>f(a.data)).catch(a=>console.log("error",a))},[]),m.exports.useEffect(()=>{let t=localStorage.getItem("cart");t||localStorage.setItem("cart",JSON.stringify([])),s(JSON.parse(t))},[]);const p=t=>{let e=localStorage.getItem("cart");e=JSON.parse(e);let a=e.findIndex(o=>o.id==t.id);a==-1?e.push({...t,quantity:1}):e[a].quantity+=1,localStorage.setItem("cart",JSON.stringify(e)),s(e)},i=t=>{let e=n.findIndex(a=>a.id==t.id);return e==-1?0:n[e].quantity},u=t=>{let e=localStorage.getItem("cart");e=JSON.parse(e);let a=e.findIndex(o=>o.id==t.id);a!=-1&&(e[a].quantity==1?e.splice(a,1):e[a].quantity-=1,localStorage.setItem("cart",JSON.stringify(e)),s(e))},x=t=>{let e=localStorage.getItem("cart");e=JSON.parse(e);let a=e.findIndex(o=>o.id==t.id);a!=-1&&(e.splice(a,1),localStorage.setItem("cart",JSON.stringify(e)),s(e))};return l("div",{className:"grid grid-cols-7 h-screen w-full",children:[r(g,{}),l("main",{className:"bg-primary w-full col-span-6 h-full grid grid-cols-7 xl:grid-cols-9 max-h-screen min-h-screen",children:[l("div",{className:"col-span-2 bg-secondary flex flex-col overflow-auto px-2 space-y-4",children:[r("div",{className:"flex justify-end items-end p-2"}),r(w,{})]}),l("div",{className:"col-span-4 xl:col-span-5 flex flex-col overflow-auto ",children:[r("div",{className:"flex bg-secondary py-4 justify-between items-center px-3",children:r("h2",{className:"text-4xl",children:(t=>{var e,a;return window.location.search?(a=(e=t[0])==null?void 0:e.category)==null?void 0:a.name:"All Menu"})(c)})}),r("div",{className:"flex overflow-auto flex-col",children:r("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 p-6",children:c&&c.map((t,e)=>l("div",{className:"flex flex-col space-y-3",children:[l("div",{className:"border border-accent aspect-[9/6] rounded-xl flex flex-col justify-between items-center py-2",children:[r("div",{className:"relative w-full",children:r("div",{className:"absolute -top-6 -left-4 aspect-square w-3/5 flex flex-col ",children:r("img",{className:" object-cover aspect-square w-10/12  object-center",src:`${t.image}`})})}),l("div",{className:"flex flex-col p-2 w-full",children:[r("h2",{className:"text-accent text-xl font-semibold",children:t.name}),r("span",{className:"text-xs",children:t.description})]})]}),l("div",{className:"flex justify-between items-center border border-accent rounded-full w-full py-1 px-3 font-bold",children:[r("span",{children:h(Number(t.price))}),l("div",{className:"flex space-x-2 items-center",children:[r("button",{onClick:()=>u(t),className:"bg-[#fae886] p-2 rounded",children:r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 12H6"})})}),r("span",{className:"px-2",children:i(t)}),r("button",{onClick:()=>p(t),className:"bg-[#fae886] p-2 rounded",children:r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})})})]})]})]},e))})})]}),r("div",{className:"bg-secondary col-span-2 overflow-auto space-y-3 pt-20 rounded border",children:r(N,{findCartQuantity:i,removeFromCart:x,cart:n,clearCart:()=>{localStorage.setItem("cart",JSON.stringify([])),s([])}})})]})]})};export{q as default};
